<!DOCTYPE html>
<html lang="en">

<head>
    <script src="../../assets/js/access-control.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gridify - ATS Friendly Resume Maker</title>
    <link rel="icon"
        href="https://pub-141831e61e69445289222976a15b6fb3.r2.dev/1763557833531-72kzoeqt2o2-1763557832622_0lvanx_g.png">
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Merriweather:wght@300;400;700&display=swap"
        rel="stylesheet">
</head>

<body>

    <div class="app-container">
        <!-- MOBILE TABS (Visible only on < 768px via CSS) -->
        <div class="mobile-tabs no-print">
            <button class="tab-btn active" id="tabEdit">Editor</button>
            <button class="tab-btn" id="tabPreview">Preview</button>
            <!--button class="tab-btn" id="tabTools">Tools</button-->
        </div>

        <!-- LEFT SIDE: EDITOR form -->
        <div class="editor-panel no-print" id="editorPanel">
            <header class="editor-header">
                <h1>ATS Resume Builder</h1>
                <p>Build a parser-friendly resume. Mandatory fields are marked with *.</p>
                <div class="header-actions">
                    <button id="downloadPdfBtn" class="btn-primary">Download PDF</button>
                    <!--button id="showToolsBtn" class="btn-secondary" style="margin-left: 10px;">Image Tools</button-->

                    <div id="validationStatus" class="validation-status"></div>
                </div>
            </header>

            <form id="resumeForm">

                <!-- 0. Configuration -->
                <section class="form-section config-section">
                    <h2>Configuration</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>CV Type</label>
                            <select id="cvType">
                                <option value="experienced">Experienced</option>
                                <option value="fresher">Fresher</option>
                                <option value="academic">Academic</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Resume Template</label>
                            <select id="resumeTemplate">
                                <option value="theme-default">Default (ATS)</option>
                                <option value="theme-modern-blue">Modern Blue</option>
                                <option value="theme-minimalist">Minimalist</option>
                                <option value="theme-elegant-purple">Elegant Purple</option>
                                <option value="theme-professional-green">Professional Green</option>
                                <option value="theme-classic-purple">Classic Purple</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Summary Type</label>
                            <select id="summaryType">
                                <option value="summary">Professional Summary</option>
                                <option value="objective">Career Objective</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>References Display</label>
                            <select id="refDisplay">
                                <option value="list">Show List</option>
                                <option value="request">"Available on Request"</option>
                            </select>
                        </div>
                    </div>
                </section>

                <!-- 1. Personal Information (Mandatory) -->
                <section class="form-section">
                    <h2>1. Personal Information <span class="req">*</span></h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Full Name *</label>
                            <input type="text" id="fullName" placeholder="John Doe" required>
                        </div>
                        <div class="form-group">
                            <label>Photo URL (Optional)</label>
                            <div style="display: flex; gap: 8px; align-items: center;">
                                <input type="url" id="photo" placeholder="https://example.com/photo.jpg"
                                    style="flex:1; min-width: 0;">
                                <button type="button" id="uploadShortcutBtn" class="btn-secondary shortcut-btn"
                                    title="Upload Image">
                                    <span class="btn-icon">‚òÅÔ∏è</span> <span class="btn-text">Upload</span>
                                </button>
                            </div>
                            <small style="font-size: 0.75rem; color: #e74c3c;">Skipping the photo keeps your resume more
                                ATS friendly.</small>
                        </div>
                        <div class="form-group">
                            <label>Target Job Title / Headline *</label>
                            <input type="text" id="jobTitle" placeholder="Senior Software Engineer" required>
                        </div>
                        <div class="form-group">
                            <label>Email Address *</label>
                            <input type="email" id="email" placeholder="john@example.com" required>
                        </div>
                        <div class="form-group">
                            <label>Phone Number *</label>
                            <input type="tel" id="phone" placeholder="+91 934 567 890" required>
                        </div>
                        <div class="form-group full">
                            <label>Address *</label>
                            <input type="text" id="location" placeholder="Kerala, India" required>
                        </div>
                        <div class="form-group">
                            <label>LinkedIn URL</label>
                            <input type="url" id="linkedin" placeholder="linkedin.com/in/johndoe">
                        </div>
                        <div class="form-group">
                            <label>Portfolio / GitHub URL</label>
                            <input type="url" id="website" placeholder="github.com/johndoe">
                        </div>
                        <!-- Nationality removed or optional if needed, but not in strict list. keeping hidden or removing if strictly following 'Minimal' prompt? User said 15-17 fields. I'll keep it as optional but outside the main grid if possible, or just leave it since it was there. I'll leave it out for now to strict adherence to the list "Personal Info: 5" -->
                    </div>
                </section>

                <!-- 3. Profile Meta -->
                <section class="form-section">
                    <h2>Profile Details</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Industry / Domain</label>
                            <input type="text" id="industry" placeholder="Fintech / Healthcare">
                        </div>
                        <div class="form-group">
                            <label>Total Experience</label>
                            <input type="text" id="totalExp" placeholder="5 Years 2 Months">
                        </div>
                        <div class="form-group">
                            <label>Current / Last Role</label>
                            <input type="text" id="currentRole" placeholder="Lead Developer">
                        </div>
                        <div class="form-group">
                            <label>Location Preference</label>
                            <select id="geoPref">
                                <option value="">Select...</option>
                                <option value="Remote">Remote</option>
                                <option value="Hybrid">Hybrid</option>
                                <option value="Onsite">Onsite</option>
                            </select>
                        </div>
                    </div>
                </section>

                <!-- 2. Summary / Objective (Mandatory) -->
                <section class="form-section">
                    <div class="section-header">
                        <h2 id="summaryHeaderLabel">2. Career Summary <span class="req">*</span></h2>
                        <button type="button" class="btn-ai" id="aiEnhanceSummary" style="display:none;">‚ú® AI
                            Enhance</button>
                    </div>
                    <!-- Hidden helpers removed to simplify as per strict request, or kept? Request says "Summary or Objective Text, 2 to 3 lines". I will simplify. -->
                    <div class="form-group">
                        <label>Summary text (2-3 lines) *</label>
                        <textarea id="summary" rows="5" placeholder="Detailed summary..." required></textarea>
                    </div>
                </section>

                <!-- 3. Skills (Mandatory) -->
                <section class="form-section">
                    <div class="section-header">
                        <h2>3. Skills <span class="req">*</span></h2>
                        <button type="button" class="btn-secondary" id="addSkill">+ Add Skill</button>
                    </div>
                    <div id="skillsContainer">
                        <!-- Dynamic Skills -->
                    </div>
                    <small style="color: #666; display: block; margin-top: 5px;">At least one skill is required.</small>
                </section>

                <!-- 4. Experience OR Projects (At Least One Required) -->
                <section class="form-section" id="secWorkExpConfig">
                    <div class="section-header">
                        <h2>4. Experience / Projects <span class="req">*</span></h2>
                    </div>
                    <p style="font-size: 0.85rem; color: #555; margin-bottom: 1rem;">At least one Experience OR one
                        Project is required.</p>

                    <!-- Option A -->
                    <div class="sub-section" style="margin-bottom: 1.5rem;">
                        <div class="section-header">
                            <h3 style="font-size: 1rem; color: #444; margin:0;">Option A: Experience</h3>
                            <button type="button" class="btn-secondary" id="addExperience">+ Add Experience</button>
                        </div>
                        <div id="experienceContainer"></div>
                    </div>

                    <!-- Option B -->
                    <div class="sub-section">
                        <div class="section-header">
                            <h3 style="font-size: 1rem; color: #444; margin:0;">Option B: Projects (Freshers)</h3>
                            <button type="button" class="btn-secondary" id="addProject">+ Add Project</button>
                        </div>
                        <div id="projectsContainer"></div>
                    </div>
                </section>

                <!-- 6. Education -->
                <section class="form-section">
                    <div class="section-header">
                        <h2>Education</h2>
                        <button type="button" class="btn-secondary" id="addEducation">+ Add More Education</button>
                    </div>
                    <div id="educationContainer">
                        <!-- Dynamic Education -->
                    </div>
                </section>

                <!-- Projects moved to Section 4 -->

                <!-- 9. Achievements -->
                <section class="form-section">
                    <div class="section-header">
                        <h2>Achievements / Awards</h2>
                        <button type="button" class="btn-secondary" id="addAchievement">+ Add More Achievement</button>
                    </div>
                    <div id="achievementsContainer">
                        <!-- Dynamic Achievements -->
                    </div>
                </section>

                <!-- 8. Certifications -->
                <section class="form-section">
                    <h2>Certifications</h2>
                    <div class="form-group">
                        <label>List Certifications (One per line: Name - Org - Year)</label>
                        <textarea id="certifications" rows="3"></textarea>
                    </div>
                </section>

                <!-- 11. Languages -->
                <section class="form-section">
                    <div class="section-header">
                        <h2>Languages</h2>
                        <button type="button" class="btn-secondary" id="addLanguage">+ Add More Language</button>
                    </div>
                    <div id="languagesContainer">
                        <!-- Dynamic Languages -->
                    </div>
                </section>

                <!-- 10. Hobbies -->
                <section class="form-section">
                    <h2>Hobbies</h2>
                    <div class="form-group">
                        <label>List Hobbies (One per line, plain text)</label>
                        <textarea id="hobbies" rows="2"></textarea>
                    </div>
                </section>

                <!-- 12. References -->
                <section class="form-section" id="refInputSection">
                    <div class="section-header">
                        <h2>References</h2>
                        <button type="button" class="btn-secondary" id="addReference">+ Add More Reference</button>
                    </div>
                    <div id="referencesContainer">
                        <!-- Dynamic References -->
                    </div>
                </section>

                <!-- 13. Declaration -->
                <section class="form-section">
                    <h2>Declaration</h2>
                    <div class="form-group">
                        <label>Text</label>
                        <textarea id="declaration"
                            rows="2">I **YOUR NAME** hereby declare that the details furnished above are true to the best of my knowledge.</textarea>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Date</label>
                            <input type="text" id="declDate" placeholder="DD/MM/YYYY">
                        </div>
                        <div class="form-group">
                            <label>Place</label>
                            <input type="text" id="declPlace" placeholder="City">
                        </div>
                    </div>
                </section>

            </form>

            <!-- UPLOAD SECTION (Hidden by default) -->
            <div id="uploadSection" class="form-section" style="display:none; text-align:center; padding: 2rem 0;">
                <div class="upload-container">
                    <h2>Image Hosting Tool</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 2rem;">Upload an image to get a public URL
                        for your resume.</p>

                    <div class="drop-zone" id="dropZone">
                        <input type="file" id="imageInput" accept="image/*" class="file-input" hidden>
                        <div class="drop-content">
                            <span style="font-size: 3rem; display:block; margin-bottom:1rem;">üìÇ</span>
                            <p>Drag & Drop your image here or <span class="browser-btn">Browse</span></p>
                            <p style="font-size: 0.8rem; color: var(--text-muted);">Supports JPG, PNG (Max 5MB)</p>
                        </div>
                    </div>

                    <div id="uploadPreview" style="display:none; margin-top: 1.5rem;">
                        <img id="previewImg" src="" alt="Preview"
                            style="max-width: 200px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.2);">
                        <div style="margin-top: 1rem;">
                            <button id="confirmUploadBtn" class="btn-primary">Upload Image</button>
                            <button id="cancelUploadBtn" class="btn-secondary">Cancel</button>
                        </div>
                    </div>

                    <div id="uploadLoader" style="display:none; margin-top: 1.5rem;">
                        <div class="spinner-border text-primary" role="status"></div>
                        <p>Uploading to Server...</p>
                    </div>

                    <div id="uploadResult"
                        style="display:none; margin-top: 2rem; text-align: left; background: var(--input-bg); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-dark);">
                        <label
                            style="font-weight: bold; display: block; margin-bottom: 0.5rem; color: var(--text-primary);">Image
                            URL (Copy this):</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="resultUrl" readonly
                                style="flex:1; background: #1e293b; border: 1px solid var(--border-dark); padding: 0.5rem; color: #4ade80; border-radius: 4px;">
                            <button id="copyUrlBtn" class="btn-secondary">Copy</button>
                        </div>
                        <p style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-secondary);">This URL has
                            been saved to your records.</p>

                        <div style="text-align:center; margin-top: 1.5rem;">
                            <button id="uploadAnotherBtn" class="btn-secondary">Upload Another Image</button>
                        </div>
                    </div>

                    <button id="backToEditorBtn" class="btn-secondary" style="margin-top: 3rem;">&larr; Back to
                        Editor</button>
                </div>
            </div>

            <div class="app-footer">
                <p>Designed and Developed by <a href="https://www.gridify.in" target="_blank">GRIDIFY</a></p>
            </div>
        </div>

        <!-- RIGHT SIDE: PREVIEW (A4) -->
        <div class="preview-panel" id="previewPanel">
            <div class="resume-paper" id="resumePreview">

                <!-- Header -->
                <div class="resume-header" id="resumeHeader">
                    <!-- Photo Container -->
                    <div class="r-photo-container" id="rPhotoContainer" style="display:none;">
                        <img id="rPhoto" src="" alt="Profile Photo">
                    </div>
                    <div class="r-header-content">
                        <h1 class="r-name">NO NAME</h1>
                        <p class="r-title">Target Role</p>

                        <div class="r-contact-info">
                            <!-- Separator logic will be styled in CSS or JS text -->
                            <span class="r-phone"></span>
                            <span class="r-email"></span>
                            <span class="r-location"></span>
                            <span class="r-linkedin"></span>
                            <span class="r-website"></span>
                            <span class="r-nationality"></span>
                        </div>

                    </div>
                    <!-- Profile Meta Structured -->
                    <div class="r-profile-meta hidden-if-empty" id="rProfileMeta">
                        <div class="r-meta-row">
                            <span class="r-meta-item r-industry"></span>
                            <span class="r-meta-item r-exp"></span>
                            <span class="r-meta-item r-role"></span>
                            <span class="r-meta-item r-geo"></span>
                        </div>
                    </div>
                </div>

                <div class="resume-body" id="resumeBody">

                    <!-- Summary/Objective -->
                    <div class="r-section" id="secSummary">
                        <h2 class="r-section-title" id="rSummaryTitle">Professional Summary</h2>
                        <p class="r-summary-text"></p>
                    </div>

                    <!-- Skills (Structured List) -->
                    <div class="r-section" id="secSkills">
                        <h2 class="r-section-title">Skills</h2>
                        <div id="r-skills-list" class="r-skills-container">
                            <!-- Dynamic Content -->
                        </div>
                    </div>

                    <!-- Experience -->
                    <div class="r-section" id="secExperience">
                        <h2 class="r-section-title">Work Experience</h2>
                        <div id="r-experience-list">
                            <!-- Dynamic Content -->
                        </div>
                    </div>

                    <!-- Education -->
                    <div class="r-section" id="secEducation">
                        <h2 class="r-section-title">Education</h2>
                        <div id="r-education-list">
                            <!-- Dynamic Content -->
                        </div>
                    </div>

                    <!-- Projects -->
                    <div class="r-section" id="secProjects">
                        <h2 class="r-section-title">Projects</h2>
                        <div id="r-projects-list">
                            <!-- Dynamic Content -->
                        </div>
                    </div>

                    <!-- Achievements -->
                    <div class="r-section" id="secAchievements">
                        <h2 class="r-section-title">Achievements</h2>
                        <ul id="r-achievements-list" class="r-bullet-list">
                            <!-- Dynamic Content -->
                        </ul>
                    </div>

                    <!-- Certifications -->
                    <div class="r-section" id="secCerts">
                        <h2 class="r-section-title">Certifications</h2>
                        <p class="r-certs-text whitespace-pre"></p>
                    </div>

                    <!-- Languages -->
                    <div class="r-section" id="secLanguages">
                        <h2 class="r-section-title">Languages</h2>
                        <p id="r-languages-list" class="r-comma-list"></p>
                    </div>

                    <!-- Hobbies -->
                    <div class="r-section" id="secHobbies">
                        <h2 class="r-section-title">Hobbies</h2>
                        <p class="r-hobbies-text whitespace-pre"></p>
                    </div>

                    <!-- References -->
                    <div class="r-section" id="secReferences">
                        <h2 class="r-section-title">References</h2>
                        <div id="r-ref-content">
                            <!-- List or "Available directly" -->
                        </div>
                    </div>

                    <!-- Declaration -->
                    <div class="r-section" id="secDeclaration">
                        <h2 class="r-section-title">Declaration</h2>
                        <p class="r-declaration-text"></p>
                        <div class="r-declaration-sign">
                            <div class="r-date-place">
                                <p><strong>Date:</strong> <span class="r-decl-date"></span></p>
                                <p><strong>Place:</strong> <span class="r-decl-place"></span></p>
                            </div>
                            <div class="r-signature-block">
                                <p style="margin-bottom:20pt;">(Signature)</p>
                                <p class="r-name-sign"></p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- TEMPLATES -->

    <!-- Skill Template -->
    <template id="skillTemplate">
        <div class="dynamic-item">
            <button type="button" class="btn-remove remove-btn">&times;</button>
            <div class="form-grid">
                <!-- Category removed as per flat list requirement -->
                <div class="form-group">
                    <label>Skill Name</label>
                    <input type="text" class="skill-name" placeholder="Java / Communication">
                </div>
                <div class="form-group full">
                    <label>Proficiency (Optional)</label>
                    <select class="skill-level">
                        <option value="">None</option>
                        <option value="Beginner">Beginner</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Expert">Expert</option>
                    </select>
                </div>
            </div>
        </div>
    </template>

    <!-- Experience Template -->
    <template id="experienceTemplate">
        <div class="dynamic-item">
            <button type="button" class="btn-remove remove-btn">&times;</button>
            <div class="form-grid">
                <div class="form-group">
                    <label>Job Title</label>
                    <input type="text" class="exp-title" placeholder="Senior Developer">
                </div>
                <div class="form-group">
                    <label>Company</label>
                    <input type="text" class="exp-company" placeholder="Acme Corp">
                </div>
                <div class="form-group">
                    <label>Department</label>
                    <input type="text" class="exp-dept" placeholder="Engineering">
                </div>
                <div class="form-group">
                    <label>Start</label>
                    <input type="text" class="exp-start" placeholder="DD/MM/YYYY">
                </div>
                <div class="form-group">
                    <label>End</label>
                    <input type="text" class="exp-end" placeholder="Present">
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <input type="text" class="exp-loc" placeholder="City, State">
                </div>
                <div class="form-group">
                    <label>Emp Type</label>
                    <input type="text" class="exp-type" placeholder="Full-time">
                </div>
                <div class="form-group full">
                    <label>Responsibilities (Bullets recommended)</label>
                    <textarea class="exp-desc" rows="3" placeholder="- Led team of 5..."></textarea>
                </div>
                <div class="form-group full">
                    <label>Tech Stack / Tools</label>
                    <input type="text" class="exp-tech" placeholder="React, Node.js">
                </div>
            </div>
        </div>
    </template>

    <!-- Education Template -->
    <template id="educationTemplate">
        <div class="dynamic-item">
            <button type="button" class="btn-remove remove-btn">&times;</button>
            <div class="form-grid">
                <div class="form-group">
                    <label>Cource</label>
                    <input type="text" class="edu-degree" placeholder="BS Computer Science">
                </div>
                <!-- Institution -> University -->
                <div class="form-group">
                    <label>University / Institute</label>
                    <input type="text" class="edu-school" placeholder="University of Tech">
                </div>
                <!-- Field of Study Removed -->

                <div class="form-group">
                    <label>Grade / CGPA</label>
                    <div style="display:flex; gap:5px;">
                        <input type="text" class="edu-grade" placeholder="3.8 or 85">
                        <select class="edu-grade-type" style="width: 80px;">
                            <option value="cgpa">CGPA</option>
                            <option value="percent">%</option>
                            <option value="grade">Grade</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Start Year</label>
                    <input type="text" class="edu-start" placeholder="2018">
                </div>
                <div class="form-group">
                    <label>End Year</label>
                    <input type="text" class="edu-end" placeholder="2022">
                </div>
                <div class="form-group full">
                    <label>Location</label>
                    <input type="text" class="edu-loc" placeholder="City, State">
                </div>
            </div>
        </div>
    </template>

    <!-- Project Template -->
    <template id="projectTemplate">
        <div class="dynamic-item">
            <button type="button" class="btn-remove remove-btn">&times;</button>
            <div class="form-grid">
                <div class="form-group">
                    <label>Project Title</label>
                    <input type="text" class="proj-name" placeholder="E-commerce App">
                </div>
                <div class="form-group">
                    <label>Role</label>
                    <input type="text" class="proj-role" placeholder="Frontend Dev">
                </div>
                <div class="form-group">
                    <label>Link</label>
                    <input type="text" class="proj-link" placeholder="github.com/...">
                </div>
                <div class="form-group">
                    <label>Tech Used</label>
                    <input type="text" class="proj-tech" placeholder="Python, Django">
                </div>
                <div class="form-group full">
                    <label>Description (Bullets)</label>
                    <textarea class="proj-desc" rows="2" placeholder="- Built cart feature..."></textarea>
                </div>
            </div>
        </div>
    </template>

    <!-- Achievement Template -->
    <template id="achievementTemplate">
        <div class="dynamic-item">
            <button type="button" class="btn-remove remove-btn">&times;</button>
            <div class="form-grid">
                <div class="form-group full">
                    <label>Title / Description</label>
                    <input type="text" class="ach-title" placeholder="Employee of the Month">
                </div>
                <div class="form-group">
                    <label>Year</label>
                    <input type="text" class="ach-year" placeholder="2023">
                </div>
            </div>
        </div>
    </template>

    <!-- Language Template -->
    <template id="languageTemplate">
        <div class="dynamic-item">
            <button type="button" class="btn-remove remove-btn">&times;</button>
            <div class="form-grid">
                <div class="form-group">
                    <label>Language</label>
                    <input type="text" class="lang-name" placeholder="English">
                </div>
                <div class="form-group">
                    <label>Proficiency</label>
                    <input type="text" class="lang-level" placeholder="Native / Fluent">
                </div>
            </div>
        </div>
    </template>

    <!-- Reference Template -->
    <template id="referenceTemplate">
        <div class="dynamic-item">
            <button type="button" class="btn-remove remove-btn">&times;</button>
            <div class="form-grid">
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" class="ref-name" placeholder="Jane Doe">
                </div>
                <div class="form-group">
                    <label>Designation</label>
                    <input type="text" class="ref-role" placeholder="Manager">
                </div>
                <div class="form-group">
                    <label>Organization</label>
                    <input type="text" class="ref-org" placeholder="Acme Inc">
                </div>
                <div class="form-group">
                    <label>Contact Info</label>
                    <input type="text" class="ref-contact" placeholder="Mob / Email">
                </div>
            </div>
        </div>
    </template>

    <script src="script.js"></script>
</body>

</html>
