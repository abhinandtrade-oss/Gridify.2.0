<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account | House of Pachu</title>
    <meta name="description"
        content="Manage your House of Pachu account, track orders, and update your personal information.">
    <link rel="shortcut icon" href="assets/img/logo.png" type="image/png">

    <!-- libraries CSS -->
    <link rel="stylesheet" href="assets/icon/flaticon_glamer.css">
    <link rel="stylesheet" href="assets/vendor/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="assets/vendor/splide/splide.min.css">
    <link rel="stylesheet" href="assets/vendor/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="assets/vendor/slim-select/slimselect.css">
    <link rel="stylesheet" href="assets/vendor/animate-wow/animate.min.css">

    <!-- custom CSS -->
    <link rel="stylesheet" href="assets/css/style.css">

    <style>
        .profile-sidebar {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            height: 100%;
        }

        .profile-nav-link {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: #333;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 5px;
            transition: all 0.3s;
        }

        .profile-nav-link i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .profile-nav-link:hover,
        .profile-nav-link.active {
            background: #ffffff;
            color: #000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .profile-card {
            background: #fff;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .address-card {
            border: 1px solid #eee;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
            transition: border-color 0.3s;
        }

        .address-card:hover {
            border-color: #000;
        }

        .address-card .badge {
            position: absolute;
            top: 15px;
            right: 15px;
        }

        .phone-input-group .input-group-text {
            background-color: #f8f9fa;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }
    </style>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="assets/js/supabase-config.js"></script>
</head>

<body>
    <div id="sidebar-placeholder"></div>
    <div id="header-placeholder"></div>

    <main>
        <!-- BREADCRUMB START -->
        <div class="ul-breadcrumb">
            <div class="ul-container">
                <div class="ul-breadcrumb-inner">
                    <h2 class="ul-breadcrumb-title">My Profile</h2>
                    <ul class="ul-breadcrumb-nav">
                        <li><a href="index.html">Home</a></li>
                        <li class="active">Profile</li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- BREADCRUMB END -->

        <div class="ul-container py-5">
            <div class="row">
                <!-- Sidebar -->
                <div class="col-lg-3 col-md-4 mb-4">
                    <div class="profile-sidebar">
                        <nav>
                            <a href="#" class="profile-nav-link active" data-tab="personal-info">
                                <i class="flaticon-user"></i> Personal Information
                            </a>
                            <a href="#" class="profile-nav-link" data-tab="addresses">
                                <i class="flaticon-marker"></i> My Addresses
                            </a>
                            <a href="#" class="profile-nav-link" data-tab="orders">
                                <i class="flaticon-shopping-bag"></i> My Orders
                            </a>
                        </nav>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="col-lg-9 col-md-8">
                    <!-- Personal Info Tab -->
                    <div id="personal-info" class="tab-content active animated fadeIn">
                        <div class="profile-card">
                            <h4 class="mb-4">Personal Information</h4>
                            <form id="personal-info-form">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Full Name</label>
                                        <input type="text" class="form-control" id="profile-name" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Email Address</label>
                                        <input type="email" class="form-control" id="profile-email" disabled>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Mobile Number</label>
                                        <div class="input-group phone-input-group">
                                            <span class="input-group-text">+91</span>
                                            <input type="tel" class="form-control" id="profile-phone"
                                                placeholder="9876543210" pattern="[0-9]{10}">
                                        </div>
                                        <small class="text-muted">For delivery related communication</small>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <button type="submit" class="ul-btn" id="btn-save-profile">Save Changes</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Addresses Tab -->
                    <div id="addresses" class="tab-content animated fadeIn">
                        <div class="profile-card">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h4 class="mb-0">My Addresses</h4>
                                <button class="ul-btn ul-btn-sm" data-bs-toggle="modal" data-bs-target="#addressModal">
                                    <i class="flaticon-plus"></i> Add New
                                </button>
                            </div>

                            <div id="address-list" class="row">
                                <!-- Addresses will be loaded here -->
                                <div class="col-12 text-center py-4">
                                    <div class="spinner-border text-primary"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Orders Tab -->
                    <div id="orders" class="tab-content animated fadeIn">
                        <div class="profile-card">
                            <h4 class="mb-4">My Orders</h4>
                            <div id="orders-list">
                                <div class="text-center py-5">
                                    <div class="spinner-border text-primary"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Order Tracking Modal -->
    <div class="modal fade" id="trackingModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content border-0">
                <div class="modal-header border-bottom-0">
                    <h5 class="modal-title">Order Status <span id="track-order-id"
                            class="text-muted ms-2 small">#</span></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body pt-0">
                    <!-- Progress Bar -->
                    <div class="py-4 px-2">
                        <div class="position-relative m-4">
                            <div class="progress" style="height: 2px;">
                                <div class="progress-bar" role="progressbar" style="width: 0%;" id="track-progress-bar">
                                </div>
                            </div>

                            <button type="button"
                                class="position-absolute top-0 start-0 translate-middle btn btn-sm btn-secondary rounded-pill"
                                style="width: 2rem; height:2rem;" id="step-pending"><i
                                    class="flaticon-shopping-list"></i></button>
                            <button type="button"
                                class="position-absolute top-0 start-25 translate-middle btn btn-sm btn-secondary rounded-pill"
                                style="width: 2rem; height:2rem; left: 25%;" id="step-processing"><i
                                    class="flaticon-settings"></i></button>
                            <button type="button"
                                class="position-absolute top-0 start-50 translate-middle btn btn-sm btn-secondary rounded-pill"
                                style="width: 2rem; height:2rem; left: 50%;" id="step-shipped"><i
                                    class="flaticon-delivery-truck"></i></button>
                            <button type="button"
                                class="position-absolute top-0 start-75 translate-middle btn btn-sm btn-secondary rounded-pill"
                                style="width: 2rem; height:2rem; left: 75%;" id="step-out"><i
                                    class="flaticon-placeholder-1"></i></button>
                            <button type="button"
                                class="position-absolute top-0 start-100 translate-middle btn btn-sm btn-secondary rounded-pill"
                                style="width: 2rem; height:2rem;" id="step-delivered"><i
                                    class="flaticon-box"></i></button>

                            <!-- Labels -->
                            <div class="position-absolute top-100 start-0 translate-middle-x mt-2 small fw-bold text-center"
                                style="width: 60px;">Placed</div>
                            <div class="position-absolute top-100 start-25 translate-middle-x mt-2 small fw-bold text-center"
                                style="width: 60px; left: 25%;">Processing</div>
                            <div class="position-absolute top-100 start-50 translate-middle-x mt-2 small fw-bold text-center"
                                style="width: 60px; left: 50%;">Shipped</div>
                            <div class="position-absolute top-100 start-75 translate-middle-x mt-2 small fw-bold text-center"
                                style="width: 60px; left: 75%;">Out Tracking</div>
                            <div class="position-absolute top-100 start-100 translate-middle-x mt-2 small fw-bold text-center"
                                style="width: 60px;">Delivered</div>
                        </div>
                    </div>

                    <hr class="my-4">

                    <div class="row">
                        <div class="col-md-7">
                            <h6 class="mb-3">Order Items</h6>
                            <div id="track-items-list">
                                <!-- Items -->
                            </div>

                            <div class="d-flex justify-content-between mt-3 pt-3 border-top fw-bold">
                                <span>Total Amount</span>
                                <span id="track-total">â‚¹0</span>
                            </div>
                        </div>
                        <div class="col-md-5 ps-md-4 border-start">
                            <h6 class="mb-3">Delivery Address</h6>
                            <div id="track-address" class="small text-muted mb-4"></div>

                            <h6 class="mb-3">Payment Method</h6>
                            <div id="track-payment" class="badge bg-light text-dark border p-2 mb-2"></div>

                            <!-- Shipment Details -->
                            <div id="track-courier-info" class="mt-4 d-none">
                                <h6 class="mb-2">Shipment Details</h6>
                                <div class="p-3 bg-light rounded">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span class="small text-muted">Courier:</span>
                                        <span id="track-courier-name" class="fw-bold text-dark"></span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span class="small text-muted">Tracking #:</span>
                                        <span id="track-number" class="font-monospace fw-bold text-primary"></span>
                                    </div>
                                </div>
                            </div>

                            <div id="track-status-badge" class="mt-2"></div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Address Modal -->
    <div class="modal fade" id="addressModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0">
                <div class="modal-header">
                    <h5 class="modal-title">Add/Edit Address</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form id="address-form">
                    <div class="modal-body">
                        <input type="hidden" id="address-id">
                        <div class="mb-3">
                            <label class="form-label">Address Title</label>
                            <input type="text" class="form-control" id="address-title"
                                placeholder="e.g. Home, Office, Work" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Address Line 1</label>
                            <input type="text" class="form-control" id="address-line1"
                                placeholder="House No, Building Name" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Address Line 2 (Optional)</label>
                            <input type="text" class="form-control" id="address-line2" placeholder="Street Name, Area">
                        </div>
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label class="form-label">State</label>
                                <select class="form-control" id="address-state" required>
                                    <option value="">Select State</option>
                                </select>
                            </div>
                            <div class="col-md-12 mb-3">
                                <label class="form-label">District / City</label>
                                <select class="form-control" id="address-city" required>
                                    <option value="">Select District</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Pincode</label>
                            <input type="text" class="form-control" id="address-pincode" pattern="[0-9]{6}"
                                placeholder="6-digit pincode" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Additional Mobile Number (Optional)</label>
                            <div class="input-group phone-input-group">
                                <span class="input-group-text">+91</span>
                                <input type="tel" class="form-control" id="address-phone-secondary"
                                    placeholder="9876543210" pattern="[0-9]{10}">
                            </div>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="address-default">
                            <label class="form-check-label" for="address-default">
                                Set as default address
                            </label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="ul-btn" id="btn-save-address">Save Address</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <!-- libraries JS -->
    <script src="assets/vendor/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/splide/splide.min.js"></script>
    <script src="assets/vendor/splide/splide-extension-auto-scroll.min.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/vendor/slim-select/slimselect.min.js"></script>
    <script src="assets/vendor/animate-wow/wow.min.js"></script>
    <script src="assets/vendor/splittype/index.min.js"></script>
    <script src="assets/vendor/mixitup/mixitup.min.js"></script>
    <script src="assets/vendor/fslightbox/fslightbox.js"></script>

    <!-- custom JS -->
    <script src="assets/js/common-loader.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/profile.js" defer></script>
</body>

</html>